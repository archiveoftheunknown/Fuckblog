<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Comment Section</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Smooth transition for comment appearance */
        .comment {
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .comment.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Transition for the comment box expansion */
        .comment-form-actions {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out;
        }

        .comment-textarea:focus-within .comment-form-actions,
        .comment-textarea.has-content .comment-form-actions {
            max-height: 100px; /* Adjust as needed */
            opacity: 1;
        }

        .comment-textarea textarea {
            transition: height 0.3s ease-in-out;
        }

        .comment-textarea textarea:focus,
        .comment-textarea.has-content textarea {
            height: 100px;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen">

    <div class="bg-white rounded-xl shadow-lg p-6 sm:p-8 w-full max-w-2xl">
        <h2 class="text-2xl font-bold text-slate-800 mb-6">Comments</h2>

        <!-- New Comment Form -->
        <div class="flex items-start space-x-4 mb-6 comment-textarea" id="commentFormContainer">
            <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Your Avatar" class="w-10 h-10 rounded-full">
            <div class="flex-1">
                <div class="border rounded-lg focus-within:ring-2 focus-within:ring-blue-500 transition-shadow duration-300">
                    <textarea id="newCommentTextarea" class="w-full p-3 text-slate-700 rounded-t-lg focus:outline-none resize-none h-16" placeholder="Add a comment..."></textarea>
                    <div class="comment-form-actions p-2 bg-slate-50 rounded-b-lg border-t border-slate-200">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-3 text-slate-500">
                                <button class="hover:text-slate-800 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                </button>
                                <button class="hover:text-slate-800 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>
                                </button>
                            </div>
                            <button id="submitComment" class="bg-blue-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105 duration-300">
                                Comment
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comments List -->
        <div id="commentsList" class="space-y-6">
            <!-- Comment 1 -->
            <div class="flex items-start space-x-4 comment">
                <img src="https://i.pravatar.cc/150?u=a042581f4e29026704e" alt="Jane Doe's Avatar" class="w-10 h-10 rounded-full">
                <div class="flex-1">
                    <div class="bg-slate-50 rounded-lg p-4">
                        <p class="font-semibold text-slate-800">Jane Doe</p>
                        <p class="text-slate-600">I really appreciate the insights and perspective shared in this article. It's definitely given me something to think about and has helped me see things from a different angle. Thank you for writing and sharing!</p>
                    </div>
                    <div class="flex items-center space-x-4 text-sm text-slate-500 mt-2">
                         <button class="flex items-center space-x-1 hover:text-blue-600 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                            <span>5</span>
                        </button>
                        <button class="hover:text-slate-800 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <span class="text-xs">· 5 min ago</span>
                    </div>
                </div>
            </div>
             <!-- Comment 2 -->
             <div class="flex items-start space-x-4 comment">
                <img src="https://i.pravatar.cc/150?u=a042581f4e29026704f" alt="John Doe's Avatar" class="w-10 h-10 rounded-full">
                <div class="flex-1">
                    <div class="bg-slate-50 rounded-lg p-4">
                        <p class="font-semibold text-slate-800">John Doe</p>
                        <p class="text-slate-600">I just tried this recipe and it was amazing! The instructions were clear and easy to follow, and the end result was delicious. I will definitely be making this again. Thanks for sharing!</p>
                    </div>
                    <div class="flex items-center space-x-4 text-sm text-slate-500 mt-2">
                        <button class="flex items-center space-x-1 hover:text-blue-600 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                           <span>12</span>
                        </button>
                        <button class="hover:text-slate-800 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <span class="text-xs">· 1 hour ago</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Load More Button -->
        <div class="text-center mt-8">
            <button id="loadMore" class="bg-slate-200 text-slate-700 font-semibold px-6 py-2 rounded-lg hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition-all duration-300">
                Load More
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const newCommentTextarea = document.getElementById('newCommentTextarea');
            const commentFormContainer = document.getElementById('commentFormContainer');
            const submitCommentBtn = document.getElementById('submitComment');
            const commentsList = document.getElementById('commentsList');

            // --- Animate existing comments on page load ---
            const existingComments = document.querySelectorAll('.comment');
            existingComments.forEach((comment, index) => {
                setTimeout(() => {
                    comment.classList.add('visible');
                }, (index + 1) * 150);
            });

            // --- Handle comment form expansion ---
            newCommentTextarea.addEventListener('input', () => {
                if (newCommentTextarea.value.trim() !== '') {
                    commentFormContainer.classList.add('has-content');
                } else {
                    commentFormContainer.classList.remove('has-content');
                }
            });
            
             newCommentTextarea.addEventListener('focus', () => {
                 commentFormContainer.classList.add('has-content');
            });


            // --- Handle new comment submission ---
            submitCommentBtn.addEventListener('click', () => {
                const commentText = newCommentTextarea.value.trim();

                if (commentText) {
                    addComment(commentText);
                    newCommentTextarea.value = '';
                    commentFormContainer.classList.remove('has-content');
                    // Reset textarea height
                    newCommentTextarea.style.height = '64px';
                }
            });

            function addComment(text) {
                const newComment = document.createElement('div');
                newComment.className = 'flex items-start space-x-4 comment';

                newComment.innerHTML = `
                    <img src="https://i.pravatar.cc/150?u=${Math.random()}" alt="Your Avatar" class="w-10 h-10 rounded-full">
                    <div class="flex-1">
                        <div class="bg-slate-50 rounded-lg p-4">
                            <p class="font-semibold text-slate-800">You</p>
                            <p class="text-slate-600">${escapeHTML(text)}</p>
                        </div>
                        <div class="flex items-center space-x-4 text-sm text-slate-500 mt-2">
                            <button class="flex items-center space-x-1 hover:text-blue-600 transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                                <span>0</span>
                            </button>
                            <button class="hover:text-slate-800 transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <span class="text-xs">· just now</span>
                        </div>
                    </div>
                `;

                commentsList.insertBefore(newComment, commentsList.firstChild);

                // Trigger the animation
                setTimeout(() => {
                    newComment.classList.add('visible');
                }, 50);
            }
            
            function escapeHTML(str) {
                return str.replace(/[&<>"']/g, function(match) {
                    return {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#39;'
                    }[match];
                });
            }

        });
    </script>
</body>
</html>
